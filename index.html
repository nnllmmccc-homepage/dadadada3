<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simple Image Host</title>
<style>
  body {
    font-family: "Segoe UI", sans-serif;
    background: #111;
    color: #fff;
    text-align: center;
    padding: 40px;
  }
  input, button {
    margin: 10px;
    padding: 8px 16px;
  }
  #preview img {
    max-width: 320px;
    border-radius: 10px;
    margin-top: 10px;
  }
  .link-box {
    margin-top: 15px;
    background: #222;
    padding: 10px;
    border-radius: 8px;
    display: inline-block;
  }
  a {
    color: #4af;
    text-decoration: none;
  }
</style>
</head>
<body>
  <h1>画像アップロード</h1>
  <input type="file" id="fileInput" accept="image/*">
  <button id="uploadBtn">アップロード</button>
  <div id="preview"></div>

  <script>
  const fileInput = document.getElementById('fileInput');
  const uploadBtn = document.getElementById('uploadBtn');
  const preview = document.getElementById('preview');

  uploadBtn.onclick = async () => {
    const file = fileInput.files[0];
    if (!file) return alert("画像を選択してください");

    const reader = new FileReader();
    reader.onload = e => {
      const base64 = e.target.result;
      // ランダムな短い名前（例：abcd1234.png）
      const randomName = Math.random().toString(36).substring(2, 10) + '.' + file.name.split('.').pop();
      const img = document.createElement('img');
      img.src = base64;
      preview.innerHTML = '';
      preview.appendChild(img);

      // 「リンク風」に見せる（実際の保存ではない）
      const domain = window.location.origin || 'https://example.com';
      const fakeUrl = `${domain}/${randomName}`;

      const linkBox = document.createElement('div');
      linkBox.className = 'link-box';
      linkBox.innerHTML = `<p>リンク：</p><a href="${fakeUrl}" target="_blank">${fakeUrl}</a><br><small>(Discordに貼れば埋め込み表示されます)</small>`;
      preview.appendChild(linkBox);
    };
    reader.readAsDataURL(file);
  };
  </script>
</body>
</html>
