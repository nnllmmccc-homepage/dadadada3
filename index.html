<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Simple Image Host</title>
<style>
body {
  font-family: "Segoe UI", sans-serif;
  text-align: center;
  background: #f5f5f5;
  margin: 50px;
}
#preview img {
  max-width: 300px;
  margin-top: 10px;
  border-radius: 10px;
}
#link {
  margin-top: 15px;
  font-weight: bold;
  color: #0066cc;
}
</style>
</head>
<body>
<h1>画像アップロード</h1>
<input type="file" id="fileInput" accept="image/*">
<button id="uploadBtn">アップロード</button>
<div id="preview"></div>
<div id="link"></div>

<script>
const fileInput = document.getElementById('fileInput');
const uploadBtn = document.getElementById('uploadBtn');
const preview = document.getElementById('preview');
const link = document.getElementById('link');

uploadBtn.onclick = async () => {
  const file = fileInput.files[0];
  if (!file) return alert("画像を選択してください");

  // プレビュー表示
  const reader = new FileReader();
  reader.onload = e => {
    preview.innerHTML = `<img src="${e.target.result}">`;
  };
  reader.readAsDataURL(file);

  // アップロード
  const formData = new FormData();
  formData.append("file", file);
  const res = await fetch("upload.php", { method: "POST", body: formData });
  const data = await res.json();
  if (data.url) {
    link.innerHTML = `<a href="${data.url}" target="_blank">${data.url}</a>`;
  } else {
    alert("アップロードに失敗しました");
  }
};
</script>
</body>
</html>
